/*******************************************************************
Rule Name: Language Required Retrieval
Description: The rule is to set the value in Language Required Attribute based on value defined in BRCM_Part_Master data table
             if the value is not defined, it would fetch value from BRCM_Defaults data table
Author: Keerthivasan/Raghavendra
Creation Date: 8-Jan-2019
*/
result="";
if(partAttributeExtFetched_avg <> "") 
{
 partJson = json(partAttributeExtFetched_avg);
 lv_language_required = jsonget(partJson,"Language Required");
 cleaned_string = "";
 if(lv_language_required <> "")
 {
  lv_language_required_arr = split(lv_language_required,"");
  specialCharactersString = "!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~ ";
  
  for each_char in lv_language_required_arr
  {
   if(find(specialCharactersString,each_char) < 0)
   {
    cleaned_string = cleaned_string + each_char;
   }
  }
     result= cleaned_string;
 }
 else 
 {
  resultSet = bmql("SELECT default_val FROM BRCM_defaults WHERE default_attr='languageRequiredRetrieval_avg'");
  for each in resultSet
  {
   result = get(each,"default_val");
  }
  return result;
 }
}
return result;