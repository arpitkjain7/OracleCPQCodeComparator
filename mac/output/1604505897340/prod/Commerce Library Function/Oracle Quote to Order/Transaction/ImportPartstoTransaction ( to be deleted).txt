/************************************************************************************************************
// created by shruti to add new lines to the transaction on 15th dec 2018
Function Name : ImportPartstoTransaction ( to be deleted)
Author : shruti
Description : importing parts to transaction.
************************************************************************************************************/
mainattachment = getattachmentdata(importQuoteDetails_t);
value = "";
content= replace(decodebase64(get(mainattachment ,"filecontent", "string")),"\n","@@");
if(content <> ""){
array1 = string[]; 
array3 = string[]; 
array4 = string[]; 
array2 = string[];
finalAry = string[];
parentDoc = "";
for n in transactionLine{

 append(array3,n._part_number);
 if(n._parent_doc_number <> "" and n._parent_doc_number<> " " and not(isnull(n._parent_doc_number))){
 parentDoc =n._parent_doc_number;
 }
 
} 
jsonObj = json();
array1 =split((substring(content,0,len(content)-2)),"@@");
cnt = 0;
for each in array1{
 sp1 = split(each,",");
 if(find(sp1[0],"Line Number") > -1){
  cnt = 1;
  }
 elif(cnt == 1){
        jsonput(jsonObj,"partNumber",sp1[1]);
 jsonput(jsonObj,"quantity",sp1[2]);
 jsonput(jsonObj,"hiddenPrice_l",sp1[3]);
 jsonput(jsonObj,"productType_l",sp1[8]);
 jsonput(jsonObj,"transactionType_l",sp1[9]);
 jsonput(jsonObj,"licenseType_l",sp1[10]);
 jsonput(jsonObj,"licenseMetric_l",sp1[11]);
 jsonput(jsonObj,"enterEnvironment_l",sp1[12]);
 jsonput(jsonObj,"languageRequired_l",sp1[13]);
 jsonput(jsonObj,"supportType_l",sp1[14]);
 jsonput(jsonObj,"businessDivision_l",sp1[18]);
          ret = jsontostr(jsonObj);
   append(array4,ret);

  }
 else{
  continue;
  }
}
jsonAry = jsonarray();
cnt = 0;
if (isempty(array3))
{
for each in array4
 {
 if(each<>"" or each<>" " or each <> "null" or not (isnull(each))){
  jsonarrayappend(jsonAry,json(each));
  
  }
 }
}
else
{

  for each in array4
  { 
  
  jsonOBj1 = json(each);
  value = jsonget(jsonObj1,"partNumber");
   if(array3[cnt] == value){
    cnt= cnt + 1;
    }
   else{
    jsonarrayappend(jsonAry,json(each));
    }
 
  }
}
value = "";
resultArray = addpartstotransaction(jsonAry, "_default_price_book");
}
else{
value = "";
}

return "1~importFileData_l~"+value;