/*********************************************************************
Function Name: Updating selectedDate_T attribute with the apporiate date. 
Description: This library function is used to fetch a date based on the basis of co-term. The date display it in the text box.
Author: Ramesh Nellimarla
User Story #: UIT-56
Date: 30th jan 2019
******************************Change Log*****************************
Date          Author       Comment 
30July2019   Shivendra   VIBER-219 -Changes done as part of fix
*********************************************************************/
result = "";
dlim="~";
dend="|";
selectOption = " ";
contractNum = " ";
tempDate = " ";
strdate = " ";

OptionSelected  = basisOfUpdation_t;
if(OptionSelected <> " " ) {
 if (OptionSelected == "calendarDate"){
  tempDate= datetostr(strtojavadate(CalendarDate_t,"yyyy-MM-dd HH:mm:ss")); 
 } 


 if (OptionSelected == "renewalDate"){
  tempDate= datetostr(strtojavadate(contractEndDate_t,"yyyy-MM-dd HH:mm:ss"));  
 } 

 if (OptionSelected == "farthestEndDate"){ 
  prevDate = getdate();
  nextDate = getdate();     
  flg= TRUE;

  for line in transactionLine
  {
     if(trim(line._model_name) == "")
     {
   nextDate = strtojavadate(line.contractEndDate_l,"yyyy-MM-dd HH:mm:ss", "America/Chicago");
   if (flg==TRUE){
    prevDate = strtojavadate(line.contractEndDate_l,"yyyy-MM-dd HH:mm:ss", "America/Chicago");
    nextDate = strtojavadate(line.contractEndDate_l,"yyyy-MM-dd HH:mm:ss", "America/Chicago");
    flg=FALSE;
   }
   elif(comparedates(nextDate,prevDate)==1){    
    prevDate= strtojavadate(line.contractEndDate_l,"yyyy-MM-dd HH:mm:ss", "America/Chicago");
   }  
   
      }
  } 
  tempDate = datetostr(prevDate);
 } 
 
}

if(tempDate <> " " OR tempDate <> "" ){ 
 
 result = result + "1" + dlim + "selectedDate_t" + dlim + tempDate + dend; 
}
/*else{
 result = result + "1" + dlim + "selectedDate_t" + dlim + "" + dend; 
}*/

return result;