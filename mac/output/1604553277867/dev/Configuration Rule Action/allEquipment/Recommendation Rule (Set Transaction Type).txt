/************************************************
*Rule Name: Set Transaction Type 
*Description: This rule is used to set transaction type
*Author: Keerthivasan
*Creation Date: 19-Dec-2018
**************************************************/
part = selectedProductNumberInt_avg;
result = "";
delim = "|^|";
size=range(partSelectionArrayControl_avg);
for each in size
{
 if(select_avg[each]==true)
 {
  part=PartNumber_avg[each];
  resultset = bmql("SELECT New_Sales_Allowed, Renewal_Allowed, Capacity_Allowed FROM BRCM_Part_Master WHERE MPN=$part");
  print resultset;

  for res in resultset
  {
   print get(res,"New_Sales_Allowed");
   print get(res,"Renewal_Allowed");
   print get(res,"Capacity_Allowed");
   if(get(res,"New_Sales_Allowed") == "Y" and get(res,"Renewal_Allowed") == "N" and get(res,"Capacity_Allowed") == "N")
   {
    result = "New";
   }
   elif(get(res,"New_Sales_Allowed") == "N" and get(res,"Renewal_Allowed") == "Y" and get(res,"Capacity_Allowed") == "N")
   {
    print "I am here";
    result = "Renew";
   }
   elif(get(res,"New_Sales_Allowed") == "N" and get(res,"Renewal_Allowed") == "N" and get(res,"Capacity_Allowed") == "Y")
   {
    result = "Capacity Addition";
   }
   /*else
   {
     if(get(res,"New_Sales_Allowed") == "Y"){
      result = result + "New" + delim;
     }
     if(get(res,"Renewal_Allowed") == "Y"){
      result = result + "Renew" + delim;
     }
     if(get(res,"Capacity_Allowed") == "Y"){
      result = result + "Capacity Addition" + delim;
     }

   }*/
  }
 }
}
return result;