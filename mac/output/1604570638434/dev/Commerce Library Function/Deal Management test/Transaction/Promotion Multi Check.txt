/************************************************************************************************************
Description: This library function is used to populate all the Promotional pricing checks .
Return type: string
History:     Date          Author            Comment 
     01/02/2019        Arjun Singh          Modified the library as per best practices
 
************************************************************************************************************/
counter1=1;
counter2=1;
Promotion_var="Multi";
mpn_array=string[];
Curr_date=getdate();
emptyarray=string[];
promo_array=string[];

for line in transactionLine{
 append(mpn_array,line._part_number);
 
}

results2 = bmql("select Start_Date,End_Date,MPN from BRCM_Promotion_Tb where Promotion_Type=$Promotion_var");
for result in results2 
  {
        if(strtojavadate(get(result,"Start_Date"),"dd/MM/yyyy") <= Curr_date AND strtojavadate(get(result,"End_Date"),"dd/MM/yyyy") >= Curr_date )
   {
   counter1=counter1+1;
   if(findinarray(mpn_array,get(result,"MPN"))<>-1){
   append(promo_array,get(result,"MPN"));
   counter2=counter2+1;
   }
   }
     }

if(counter1==counter2)
 {
 return promo_array;
 }
else
 {
 return emptyarray;
 }