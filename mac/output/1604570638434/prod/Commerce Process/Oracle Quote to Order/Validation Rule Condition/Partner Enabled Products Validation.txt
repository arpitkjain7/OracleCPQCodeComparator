/********************************************************************
Function Name: partnerEnabledProductsConstraint_brcm
Description: This BML constraint is used to restrict partner users to add only partner enabled flags.
Date: March 8 2019
User Story: UID-24
Author: Raghav/Satya
********************************************************************/
existingPartnerGroups = _system_user_groups;
searchString = "partner";
parentPartDictionary = Dict("integer");
if(find(existingPartnerGroups,searchString) >= 0)
{
 for line in transactionLine
 {
  if(line._part_number <> "" )
  {
   if(not containsKey(parentPartDictionary,line._part_number))
   {
    put(parentPartDictionary, line._part_number, line._price_quantity);
    
   }
  }
 }
 
 parentPartArray = keys(parentPartDictionary);
 if(sizeofarray(parentPartArray) > 0)
 {
  
  resultSet = bmql("select MPN,Partner_Enabled from BRCM_Part_Master_Ext where MPN IN $parentPartArray");
  for each_record in resultSet
  {
   partnerEnabledValue = get(each_record,"Partner_Enabled");
   if(partnerEnabledValue == "No")
   {
    
    return true;
   }
  }
 }
 else
 {

  return false;
 }
}

return false;