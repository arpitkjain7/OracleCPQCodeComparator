/*********************************************************************
24/02/2020        Kavita Lolla        SYMINT-3123 - Revisiting grouping logic. HW/SW combo not allowed for New/Capacity/Upgrade
02/03/2020   Kavita / Adithya    SYMINT-5474 - Symantec Day 2 - HW Upgrade SKUS - Validations Change
03/03/2020   Kavita       SYMINT-6483 - Added condition to ignore Subscription support lines for validation since they dont have covered products.
11/03/2020   Kavita       SYMINT-6649 - HW validation on Renewal quotes Renew Software lines 
15/06/2020   Kavita Lolla       VIPER-890   - Updated conditions to allow New/Capacity HW lines with Renew lines.
***********************************************************************************/
isSymHW = false;
isSymNonHW = false;
isRenewSymHW = false;
isRenewSymNonHW = false;
//VIPER-890 - Check if Renew lines are present
isRenewLine = false;
//SYMINT-5474 - Begin
isUpgHW = false;
isUpgSW = false;
//SYMINT-5474 - End
//SYMINT-6649 - Flags for subscription lines
isSubsHW = false;
isSubsSW = false;
for line in transactionLine
              {
                             if(line._part_number <> "" AND line._part_number <>"Cust")
                             {
                             // SYMINT-5474 - Begin - Check for hardware upgrade and software  in the same quote.
                                           if(line.transactionTypeM_l == "Upgrade" and line.coveredProduct_l == "" ) {
                                                          if(line.productGroup_l == "Hardware" AND line.businessDivision_l == "SED"){
                                                                        isUpgHW = true;
                                                          }
                                                          else{
                                                                        isUpgSW = true;
                                                          }
                                           }
             
       //SYMINT-5474 - End
                                           if((line.transactionTypeM_l == "New" or line.transactionTypeM_l == "Capacity") AND line.coveredProduct_l == "" ) {
                                               if(line.productGroup_l == "Hardware" AND line.businessDivision_l == "SED")
                                                          {
                                                                        isSymHW = true;
                                                          }
                                                          else
                                                          {
                                                                        isSymNonHW = true;
                                                          }
                                           }
                                           //SYMINT-6483 - added condition to ignore subscription lines.
                                           if(line.transactionTypeM_l == "Renew" AND line.licenseType_l <> "Subscription")
                                           {
                                                          
                                                          if(line.productGroup_l == "Hardware" AND line.businessDivision_l == "SED")
                                                          {
                                                                        if(line.renewalCreatedBy_l == "Integration User"){
                                                                                      isRenewSymHW = true;
                                                                        }
                                                                       
                                                          }
                                                          else
                                                          {
                                                           /*             if(line.renewalCreatedBy_l <> "Integration User"){
                                                                          print line._document_number;
                                                                                                     isSymNonHW = true;
                                                                                      }
                                                                                      else
                                                                                      {
                                                                                                     isRenewSymNonHW = true;
                                                                                      }*/
                                                                                       if(line.renewalCreatedBy_l == "Integration User"){
                                                                                                     isRenewSymNonHW = true;
                                                                                      }
                                                                              /*        else
                                                                                      {
                                                                                                     
                                                                                      }*/
                                                          }
                                           }
                                           //SYMINT-6649 - Populate HW / SW flags for subscription lines.
                                             if(line.transactionTypeM_l == "Renew" AND line.licenseType_l == "Subscription")
                                             {
                                               if(line.productGroup_l == "Hardware" AND line.businessDivision_l == "SED")
                                                          {
                                                            isSubsHW = true;
                                                          }
                                                          else
                                                          {
                                                            isSubsSW = true;
                                                          }
                                             }      
                                           //SYMINT-6483 - condition change      
                                           if(line.transactionTypeM_l == "Renew" AND line.renewalCreatedBy_l <> "Integration User" AND line.coveredProduct_l == "" AND line.licenseType_l <> "Subscription")
                                           {
                                                          if(line.productGroup_l == "Hardware" AND line.businessDivision_l == "SED")
                                                          {
                                                                        isRenewSymHW = true;
                                                          }
                                                          else
                                                          {
                                                                   isRenewSymNonHW = true;
                                                          }
                                           }
                                           //VIPER-890 - Check if Renew lines are present
      if(line.transactionTypeM_l == "Renew")
        {
      isRenewLine = true;
       }
                             }
              }
     
// SYMINT-5474 - Begin - Returns true if Hardware and Software lines are found in the same quote
/*if(isUpgHW == true AND isUpgSW == true){
              return true;
}*/


if(isUpgHW == true AND isSymNonHW == true){
              return true;
}
if(isUpgSW == true AND isSymHW == true){
              return true;
}
if(isUpgHW == true AND isRenewSymNonHW == true)
{
              return true;
}
if(isRenewSymHW == true AND isUpgSW == true)
{
              return true;
}
//SYMINT-5474 - End
if(isSymHW == true AND isSymNonHW == true) {
              return true;
}
//VIPER-890 - Check if Renew lines are present alongwith SW New/Capacity lines
if(isSymHW == true AND isRenewSymNonHW == true)
{
              return true;
}
//VIPER-890 - Commented To allow New/Capacity SW lines
/*if(isRenewSymHW == true AND isSymNonHW == true)
{
              return true;
}*/
//SYMINT-6649 - comes to this block if only Renew subscription HW/SW lines are grouped with non-renew SW/HW lines
/*if(isSubsHW == true AND isSymNonHW== true)
{
 return true;
}*/
if(isSubsHW == true AND isSymHW==true)
{
 return true;
}
if(isSubsSW == true AND isSymHW==true)
{
 return true;
}
//VIPER-890 - To throw validation for HW Renew lines and SW New/Capacity
if(isRenewLine AND isSymHW)
{
 return true;
}
return false;